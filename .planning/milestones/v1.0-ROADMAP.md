# Milestone v1.0: Core Platform

**Status:** SHIPPED 2026-01-19
**Phases:** 4.1-7
**Total Plans:** 15

## Overview

ORION v1.0 Core Platform delivers a complete autonomous homelab system with Go event bus, AI Council multi-model reasoning, edge device integration with safety controls, and distributed LLM inference cluster.

## Phases

### Phase 4.1: TECHNICAL PIVOT: Bus Migration to Go (INSERTED)

**Goal**: Rewrite orion-bus from Python to Go for performance, memory efficiency, and type safety
**Depends on**: Phase 4 (Telegram Approvals)
**Plans**: 4 plans

Plans:
- [x] 04.1-01: Go Project Setup with dependencies
- [x] 04.1-02: Core Bus Implementation with Redis Streams
- [x] 04.1-03: Validation & Code Generation
- [x] 04.1-04: Migration Strategy & Cutover

**Details:**
- EventBus package with Publish/Subscribe methods
- ContractValidator using santhosh-tekuri/jsonschema/v6 (Draft 2020-12)
- 25 unit tests with 78%+ coverage
- Graceful shutdown coordinator with 25s timeout
- Zero-downtime migration strategy documented

### Phase 5: AI Council

**Goal**: Multi-model reasoning with confidence scoring
**Depends on**: Phase 4.1 (Bus Migration to Go)
**Plans**: 4 plans

Plans:
- [x] 05-01: Local SLM Validator (Gemma-2 2B via Ollama)
- [x] 05-02: External API Validator (Claude + OpenAI)
- [x] 05-03: Consensus Aggregator with confidence-weighted voting
- [x] 05-04: Integration & Testing with Brain

**Details:**
- CouncilValidator interfaces with Ollama-served Gemma-2 2B
- ExternalValidator with Claude 3.5 Sonnet and GPT-4 Turbo
- Confidence-weighted voting with safety veto
- MemoryManager enforces 4GB minimum free RAM
- Fail-closed error handling throughout
- 36 new tests (22 unit + 14 integration)

### Phase 6: Edge Integration

**Goal**: Autonomous edge devices with offline safety
**Depends on**: Phase 4
**Plans**: 4 plans

Plans:
- [x] 06-01: Edge Device Contracts (command, telemetry, health schemas)
- [x] 06-02: orion-edge-agent Go Project Foundation
- [x] 06-03: Dead Man's Switch and Safe State
- [x] 06-04: Integration & Documentation

**Details:**
- JSON Schema contracts for edge communication
- Go agent with Redis and MQTT clients
- Dead Man's Switch watchdog timer (configurable timeout)
- "Sit & Freeze" safe state manager
- 12 tests (8 unit + 4 integration)
- Static ARM64 binary for Pi 4 deployment

### Phase 7: Compute Expansion

**Goal**: Distributed LLM inference cluster
**Depends on**: Phase 6
**Plans**: 3 plans

Plans:
- [x] 07-01: Worker Agent Foundation (contracts, metrics, registry)
- [x] 07-02: Router Service (sticky routing, health-aware selection)
- [x] 07-03: Integration & Testing (binaries, JSON Schema, docs)

**Details:**
- WorkerAgent with Ollama integration for inference processing
- StickyRouter algorithm for model residency optimization
- Health-aware routing (temp > 75°C or RAM > 90% excluded)
- Two deployable binaries (orion-inference-worker, orion-inference-router)
- Integration tests with miniredis
- Comprehensive deployment documentation

---

## Milestone Summary

**Decimal Phases:**
- Phase 4.1: TECHNICAL PIVOT: Bus Migration to Go (inserted after Phase 4 for performance)

**Key Decisions:**

- Go for event bus (performance, memory, type safety)
- santhosh-tekuri/jsonschema for validation (kaptinlin required Go 1.25)
- Gemma-2 2B for local SLM (lower RAM than Phi-3)
- Claude 3.5 Sonnet for external validation (superior reasoning)
- 5-second default watchdog timeout for edge devices
- Sticky routing prefers nodes with model loaded
- Health thresholds: temp > 75°C, RAM > 90%

**Issues Resolved:**

- gopsutil v4 API change (sensors package moved from host)
- Code generation deferred (requires Go 1.23+, have 1.22)
- Miniredis context cancellation behavior differs from real Redis

**Issues Deferred:**

- Code generation for Go structs (after Go 1.23 upgrade)
- Actual servo control for edge robot (requires hardware)
- Inverse kinematics implementation

**Technical Debt Incurred:**

- Runtime validation instead of generated structs (acceptable, full schema support)
- Stub kinematics callbacks in edge agent (planned for future phase)

---

_For current project status, see .planning/ROADMAP.md_
